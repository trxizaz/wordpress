const app=new App(appSettings),comparisonSlot=document.querySelector("#settingsSlot");let comparison;comparisonSlot&&setTimeout((function(){comparison=new Comparison,comparisonSlot.appendChild(comparison.elem)}),100),function(){const t=document.querySelector("#fileSelector"),e=document.querySelector("[for='fileSelector']");function i(t){if(!app)return;t.preventDefault();let e,i=t.dataTransfer,n=t.target;if(e=i?i.files:n.files,e){e=Array.prototype.slice.call(e);for(let t in e){let i=e[t];app.add(i)}i||(t.target.value="")}}t&&t.addEventListener("change",i),e&&e.addEventListener("keypress",(function(e){32!=e.keyCode&&13!=e.keyCode||(e.preventDefault(),t.click())})),window.addEventListener("drop",i,!0),window.addEventListener("dragover",(function(t){const e=Array.prototype.slice.call(t.dataTransfer.types);t.preventDefault();for(let i in e){if(-1!=e[i].indexOf("text"))return void(t.dataTransfer.dropEffect="none")}t.dataTransfer.dropEffect=app.list.length<appSettings.maxLength?"copy":"none"}),!0)}(),window.Ajax=function(t,e,i){i=i||{};const n=new XMLHttpRequest,o={},s=i&&Object.assign({},i.data);if(t=t.toUpperCase(),this.timeoutId=-1,this.stopped=!1,this.abort=function(){this.stopped=!0,clearTimeout(this.timeoutId),n.abort()},this.onLoad=l.bind(this,"load"),this.onFinal=l.bind(this,"final"),this.onProgress=l.bind(this,"progress"),this.onAbort=l.bind(this,"abort"),this.onError=l.bind(this,"error"),s.rnd=Math.random(),"GET"==t){e+="?";for(let t in s)e+="&"+t+"="+encodeURIComponent(s[t]);e=e.replace("?&","?")}return n.addEventListener("load",function(){let t=n.response;if(200!=n.status)return this.stopped=!0,a("error",n.status+": "+n.statusText),void a("final");if(i.type||(t=JSON.parse(t)),"error"==t.status)return clearTimeout(this.timeoutId),this.stopped=!0,a("error",t.details),void a("final");if(i.progress){if(100==t[i.progress.key])return clearTimeout(this.timeoutId),this.stopped=!0,a("load",t),void a("final");if(e.split("?")[0]==i.progress.url){if(this.stopped)return;return e=i.progress.url+"?rnd="+Math.random(),a("progress",t[i.progress.key]),void(this.timeoutId=setTimeout(r,500))}return e=i.progress.url+"?rnd="+Math.random(),void r()}a("load",t),a("final")}.bind(this)),n.addEventListener("error",(function(t){a("error",t),a("final")})),n.addEventListener("abort",(function(t){a(o.abort?"abort":"error",t.type),a("final")})),n.upload&&n.upload.addEventListener("progress",(function(t){a("progress",t.loaded/t.total)})),void r();function r(){n.open(t,e,!0),"GET"==t?n.send():n.send(function(){const t=new FormData;for(let e in s)t.append(e,s[e]);return t}())}function l(t,e){return o[t]||(o[t]=[]),o[t].push(e),this}function a(t){if(o[t])for(let e in o[t])o[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},function(){let t=document.querySelector("#template-popup");if(!t)return;const e=[],i=function(t){let e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}(t.innerHTML),n=document.querySelectorAll("[data-popup]");if(!n||!n.length)return;t.parentNode.removeChild(t),t=void 0,Array.prototype.forEach.call(n,(function(t){t.addEventListener("click",(function(t){t.preventDefault(),new o(this)}))})),document.addEventListener("click",(function(t){e.length&&!t.target.closest(".popup__overflow")&&s()}));const o=function(t){function n(){this.elem&&this.elem.parentNode.removeChild(this.elem);for(let t in this)delete this[t];!function(t){for(let i in e)if(t==e[i]){e.splice(i,1);break}}(this)}this.elem=null,this.href=t.href,this.title=t.dataset.popup||t.title,this.close=function(){if(!this.elem.classList.contains("popup_visible"))return void n.call(this);this.elem.addEventListener("transitionend",function(t){t.target==this.elem&&"opacity"==t.propertyName&&(this.visible=!1,n.call(this))}.bind(this)),this.elem.classList.remove("popup_visible")},new Ajax("GET",this.href,{type:"text"}).onLoad(function(t){this.content=t,this.elem=i.cloneNode(!0),this.elem.querySelector(".popup__title").innerHTML=this.title,this.elem.querySelector(".popup__content").innerHTML=this.content,this.elem.querySelector(".popup__close").addEventListener("click",function(t){t.preventDefault(),this.close()}.bind(this)),s(),document.body.appendChild(this.elem),setTimeout(function(){this.elem.classList.add("popup_visible"),e.push(this)}.bind(this),100)}.bind(this))};function s(){for(let t in e){e[t].close()}}}(),function(){const t=document.querySelector("#language");t&&t.addEventListener("change",(function(){location.href=("/"==this.value[0]?"":"/")+this.value}))}(),function(){const t=5e3,e=5,i=[],n=[],o=function(){const t=document.querySelector("#template-notice"),e=document.createElement("div");if(t)return e.innerHTML=t.innerHTML,t.parentNode.removeChild(t),e.firstElementChild}();let s=null;if(!o)return;function r(){for(;i.length<e&&n.length;){let e=n.shift();i.push(e),setTimeout((function(){l(e.elem)}),t)}for(let t in i){let e=i[t];s.contains(e.elem)||(s.children.length?s.insertBefore(e.elem,s.firstElementChild):s.appendChild(e.elem))}requestAnimationFrame((function(){s.style.transform="translate3d(-50%,"+s.offsetHeight+"px,0)"}))}function l(t){for(let e in i){let n=i[e];if(n.elem==t){n.remove(),i.splice(e,1),t.addEventListener("transitionend",(function(e){"opacity"==e.propertyName&&e.target==t&&(t.parentNode.removeChild(t),r())})),t.style.height=t.offsetHeight+"px",requestAnimationFrame((function(){t.classList.add("notices__item_hidden")}));break}}}window.Notice=function(t){s||(s=function(){const t=document.createElement("ul");return t.classList.add("notices"),t.addEventListener("click",(function(t){const e=t.target.closest(".notices__item");e&&l(e)})),document.body.appendChild(t),t}()),this.elem=o.cloneNode(!0),this.elem.firstElementChild.insertAdjacentHTML("afterbegin",t),this.remove=function(){for(let t in this)delete this[t]},n.push(this),r()}}(),function(){let t=document.querySelectorAll("[data-share]");t=Array.prototype.slice.call(t);for(let e in t){let i=t[e],n=i.getAttribute("href");n=n.replace("{{url}}",encodeURIComponent(appSettings.origin||location.href)),n=n.replace("{{text}}",encodeURIComponent(appSettings.title||document.title)),i.setAttribute("href",n)}}(),function(){const t=[];window.SmoothScroll=function(e){for(let i in t){let n=t[i];if(n.elem==e)return n}function i(){this.scrollTo=n,this.stop=o,this.tick=s,this.elem=e,this.pos={from:null,to:null,dur:null},this.time={start:null,end:null},this.timerId=null,this.duration=null,t.push(this)}function n(t,e,i){this.stop();let n=this.elem.offsetWidth,o=this.elem.scrollWidth-n;this.pos.from=this.elem.scrollLeft,this.callback=i,t>=o&&o==this.pos.from||t<=0&&!this.pos.from?this.callback&&this.callback():(this.pos.to=Math.max(0,Math.min(o,t)),this.pos.dur=this.pos.to-this.pos.from,this.pos.to!=t&&this.pos.to&&Number.isFinite(t)?this.duration=e*(this.pos.to/t):this.duration=e,this.time.start=performance.now(),this.time.end=this.time.start+this.duration,this.tick())}function o(){cancelAnimationFrame(this.timerId),i.call(this)}function s(){let t=performance.now();var e,i,n,o;this.time.dur=t-this.time.start,value=(e=this.time.dur,i=this.pos.from,n=this.pos.dur,o=this.duration,(e/=o/2)<1?n/2*e*e+i:(e--,-n/2*(e*(e-2)-1)+i)),this.elem.scrollLeft=value,t<this.time.end&&value!=this.pos.to?this.timerId=requestAnimationFrame(s.bind(this)):(this.elem.scrollLeft=this.pos.to,this.callback&&this.callback(),this.stop())}i.call(this)}}();